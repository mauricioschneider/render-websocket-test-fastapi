<!DOCTYPE html>
<html>
<head>
    <title>WebSocket Client</title>
</head>
<body>
    <h1>WebSocket Connection Status</h1>
    <pre id="log"></pre>

    <script>
        const log = document.getElementById('log');
        const urlParams = new URLSearchParams(window.location.search);
        const wsUrl = urlParams.get('url');

        if (!wsUrl) {
            log.textContent = 'Error: WebSocket URL missing. Add ?url=ws://{url}/idle or ?url=ws://{url}/active to the URL.';
        } else {
            const ws = new WebSocket(wsUrl);

            ws.onopen = (event) => {
                log.textContent += `üü¢ Connection established at ${new Date().toLocaleTimeString()}\n`;
            };

            ws.onmessage = (event) => {
                log.textContent += `‚û°Ô∏è Received data: ${event.data}\n`;
            };

            ws.onclose = (event) => {
                const reason = event.reason ? ` Reason: ${event.reason}` : '';
                log.textContent += `üî¥ Disconnected. Code: ${event.code}.${reason}\n`;
            };

            ws.onerror = (error) => {
                log.textContent += `‚ùó An error occurred.\n`;
                console.error('WebSocket Error:', error);
            };
        }
    </script>
</body>
</html>